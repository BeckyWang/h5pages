<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <title>考试报告查询</title>

        <style>
            input[type=text] {
                font-size: 16px;
            }
            input[type=button] {
                font-size: 14px;
            }
            body {
                width: 500px;
                text-align: center;
                margin: auto;
                padding-top: 20px;
            }
            ul, li {
                margin: 0;
                padding: 0;
                margin-top: 6px;
            }
        </style>
    <body>
        <input type="text" id="id"><input type="button" value="搜索" onclick="search()">
        <ul id="list"></ul>
        <script>
            var search = function() {
                var id = document.getElementById("id").value;
                var script = document.createElement('script');
                script.setAttribute("src", "http://ksbg.xueersi.com/index.php?r=stat/search&stu_id=" + id + "&callback=show");
                document.getElementsByTagName('body')[0].append(script);
            }

            var show = function(result) {
                console.log(result.data)
                var data = result.data;
                var list = document.getElementById("list");

                if (!data || !data.length) {
                    list.innerHTML = "没有查询结果";
                    return;
                }

                var innerHTML = data.map(function(d) {
                    return "<li><a href='" + d.preview_url + "'>" + d.subject_name + "</a></li>"
                });

                list.innerHTML = innerHTML.join("");
            }
        </script>
    </body>
</html>